<script src="sweetalert2/dist/sweetalert2.min.js"></script>
<link rel="stylesheet" href="sweetalert2/dist/sweetalert2.min.css">

<main class="content" id="bodyNovaAtividade">
    <div class="row">
        <h4>Nova atividade</h4>
        <div class="d-flex justify-content-end">
            <button type="button" id="atividades" class="btn btn-primary">Lista de Atividades</button>
        </div>
    </div>
    <div class="row">
        <div class="col-3">
            <label>Matéria:</label>
            <select class="form-control form-select" id="materia"></select>
        </div>
        <div class="col-3">
            <label>Tipo Atividade</label>
            <select class="form-control form-select" id="tipoAtividade">
                <option value="0">Selecione</option>
                <option value="1">Questionário</option>
                <option value="2">Atividade Leitura</option>
                <option value="3">Ativdade Externa</option>
            </select>
        </div>
        <div class="col-4 divTipoQuestionario d-none">
            <label>Tipo de Questionário</label>
            <select class="form-control form-select" id="tipoQuestionario">
                <option value="1">Tradicional</option>
                <option value="2">Automático</option>
            </select>
        </div>
        <div class="col-4">
            <label>Nome da Atividade</label>
            <input class="form-control" type="text" id="nomeAtividade" />
        </div>
        <div class="col-2">
            <label>Pontuação</label>
            <input class="form-control" disabled type="text" id="pontucaoAtividade" />
        </div>
        <br>
        <div class="dual-listbox row">
            <h5>Enviar para:</h5>
            <div id="selectAluno"></div>
            <div class="col-5 selecaoAlunos">
                <label><strong>Disponíveis</strong></label>
                <div class="listbox" id="aluno"></div>
            </div>
            <div class="col-5 selecaoAlunos">
                <label><strong>Selecionados</strong></label>
                <div class="listbox" id="listaSelecionados"></div>
            </div>

            <div class="d-flex justify-content-center align-items-center row">
                <div class="col-3">
                    <button class="btn btn-primary adicionarAlunos"
                        onclick="moverCheckboxes('aluno', 'listaSelecionados')"><i
                            class="fa-solid fa-plus"></i>Adicionar
                    </button>
                </div>
                <div class="col-3">
                    <button class="btn btn-danger removerAlunos"
                        onclick="moverCheckboxes('listaSelecionados', 'aluno')"><i class="fa-solid fa-minus"></i>
                        Remover</button>
                </div>
            </div>
        </div>
        <div class="controle d-none">
            <input type="text" name="" id="alunosSelecionados">
            <input type="text" name="" id="idAtividade">
        </div>
    </div>
    <div class="cardQuestionario hide">
        <div class="row">
            <div class="d-flex justify-content-end">
                <button class="btn btn-primary" id="add-pergunta"><i class="fa-solid fa-plus"></i>Nova Pergunta</button>
            </div>

        </div>
    </div>
    <div class="cardAtividade hide">
        <div class="row">
            <div class="d-flex col-xs-12">
                <textarea class="form-control" id="textoLeitura"
                    placeholder="Digite o conteúdo de leitura..."></textarea>
            </div>
        </div>
        <div class="row">
            <div class="d-flex col-xs-12">
                <input type="file" class="form-control" id="arquivoPdf" accept=".pdf">
            </div>
        </div>
        <div class="row hide"><iframe src="" id="exibirArquivo"></iframe></div>
    </div>
    <div id="perguntas-container"></div>
    <div class="row d-flex justify-content-around">
        <button type="button" class="btn col-5 salvarRascunho" id="salvarRascunho">Salvar
            Rascunho</button>
        <button type="button" class="btn btn-success col-5" id="publicar">Publicar Atividade</button>
        <button type="button" class="btn btn-success d-none" id="gerarQuestionario">Gerar Questionário</button>
    </div>
</main>
<script src="./script.js"></script>
<script>
    let perguntaCount = 0;
    $(document).ready(function () {
        $("#atividades").click(() => {
            $("#main").load(`./Atividades/index.html`);
            executarScriptsEspecificos('Atividades')
        })
        $(document).on("change", "#tipoAtividade", definirTipoAtividade);
        $(document).on("click", "#add-pergunta", adicionarPergunta);
        $(document).on("click", ".add-alternativa", adicionarAlternativa);
        $('#perguntas-container').on('change', '.pontuacaoPergunta', somarPontuacaoAtividade)

        $('#salvarRascunho').click(function () {
            salvarAtividade(false)
        });
        $('#publicar').click(function () {
            salvarAtividade(true)
        });
    });

</script>